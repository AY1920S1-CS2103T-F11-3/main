@startuml
start
:User executes command;

'Since the beta syntax does not support placing the condition outside the
'diamond we place it as the true branch instead.

if () then ([is undo-able command])
    if () then ([current state is not equal previous state])
    :push current state
    into undo stack;

    else (
else ()
endif
endif
stop
@enduml
